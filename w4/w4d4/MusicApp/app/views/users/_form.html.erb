<% action_url = user.persisted? ? user_url(user) : users_url %>
<% method = user.persisted? ? "patch" : "post" %>
<% message = user.persisted? ? "Edit" : "Create" %>

<form action="<%= action_url %>" method="post">
  <input name="_method"
         type="hidden"
         value="<%= method %>">
  <input name="authenticity_token"
         type="hidden"
         value="<%= form_authenticity_token %>">

  <label for="email">Email</label>
  <input type="text" name="user[email]" value="<%= user.email %>" id="email">
  <br>
  <label for="password">Password</label>
  <input type="password" name="user[password]" value="<%= user.password %>" id="password">
  <br>
  <input type="submit" value="<%= message %>">
</form>
